<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Console de Senhas</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
</head>
<body>
  <h1>[Console de GeraÃ§Ã£o de Senhas]</h1>

  <select id="tema" onchange="trocarTema()" title="Escolher tema">
    <option value="verde">ðŸŸ¢ Verde</option>
    <option value="vermelho">ðŸ”´ Vermelho</option>
    <option value="azul">ðŸ”µ Azul</option>
  </select>

  <div id="output">Inicializando sistema...</div>
  <button onclick="gerarSenha()">â†» Gerar nova senha</button>

  <script src="script.js"></script>
</body>
</html>
:root {
  --cor-principal: #33ff33;
  --cor-bg: #0f0f0f;
}
body {
  background-color: var(--cor-bg);
  color: var(--cor-principal);
  font-family: 'Courier New', Courier, monospace;
  margin: 0;
  padding: 20px;
}
h1 {
  font-size: 2em;
  text-shadow: 0 0 10px var(--cor-principal);
}
#output {
  border: 1px solid var(--cor-principal);
  background: #000;
  padding: 20px;
  min-height: 180px;
  overflow-y: auto;
  max-height: 300px;
  white-space: pre-wrap;
  margin: 20px 0;
}
button {
  background-color: #000;
  color: var(--cor-principal);
  border: 1px solid var(--cor-principal);
  padding: 10px 20px;
  cursor: pointer;
}
button:hover {
  background-color: var(--cor-principal);
  color: #000;
}
select {
  background: #000;
  color: var(--cor-principal);
  border: 1px solid var(--cor-principal);
  margin-bottom: 10px;
}
.blinking {
  animation: blink 1s step-start infinite;
}
@keyframes blink {
  50% { opacity: 0; }
}
let beep = new Audio('beep.mp3');
let historico = [];

function digitarTexto(elemento, texto, delay = 15) {
  elemento.innerHTML = '';
  let i = 0;
  function escrever() {
    if (i < texto.length) {
      elemento.innerHTML += texto[i++];
      beep.currentTime = 0;
      beep.play();
      setTimeout(escrever, delay);
    } else {
      elemento.innerHTML += '<span class="blinking">_</span>';
    }
  }
  escrever();
}

function gerarSenha() {
  const letras = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const numeros = '0123456789';
  const simbolos = '!@#$%&*()-_=+<>?';
  const chars = letras + numeros + simbolos;
  const tamanho = Math.floor(Math.random() * 10) + 12;

  let senha = '';
  for (let i = 0; i < tamanho; i++) {
    senha += chars[Math.floor(Math.random() * chars.length)];
  }

  historico.push(senha);
  if (historico.length > 10) historico.shift(); // manter Ãºltimas 10

  const log = `
[Sistema] Gerando nova senha...
[OK] Senha criada:

â†’ ${senha}

[HistÃ³rico] Ãšltimas senhas:
${historico.map((s, i) => `${i + 1}. ${s}`).join('\n')}
`;

  const output = document.getElementById('output');
  digitarTexto(output, log, 10);
}

function trocarTema() {
  const tema = document.getElementById('tema').value;
  const root = document.documentElement.style;
  if (tema === 'verde') {
    root.setProperty('--cor-principal', '#33ff33');
  } else if (tema === 'vermelho') {
    root.setProperty('--cor-principal', '#ff4444');
  } else if (tema === 'azul') {
    root.setProperty('--cor-principal', '#44aaff');
  }
}

window.addEventListener('load', () => {
  gerarSenha();
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
});
{
  "name": "Console de Senhas",
  "short_name": "Senhas",
  "start_url": "index.html",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#33ff33",
  "icons": [
    {
      "src": "icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
self.addEventListener('install', e => {
  e.waitUntil(
    caches.open('senha-cache-v1').then(cache =>
      cache.addAll(['index.html', 'style.css', 'script.js', 'beep.mp3'])
    )
  );
});

self.addEventListener('fetch', e => {
  e.respondWith(
    caches.match(e.request).then(response => response || fetch(e.request))
  );
});
